<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="author" content="Travis Ard">
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="robots" content="all" />
    
    <title></title>
    
    <!-- IE HTML5 support fixes -->
    <!--[if IE]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <!--[if lt IE 9]><script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script><![endif]-->

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js" type="text/javascript"></script>
    <script src="koko.js" type="text/javascript"></script>
    <script type="text/javascript">

        koko.require('adapter.js');

        var myView = koko.defineView('myView', function() {
            
            this.getTweets = function(screenname) {
                if (typeof screenname !== 'undefined') {
                    var twitterData = {'screenname':screenname};
                    this.dispatchEvent('Adapter:Twitter:getTweetsByName', twitterData, function(result) {
                        document.getElementById('tweets').innerHTML = result;
                    });
                } else {
                    this.dispatchEvent('Adapter:Twitter:getPublicTweets', undefined, function(result) {
                        document.getElementById('tweets').innerHTML = result;
                    });
                }
            };
            this.getPhotos = function(username) {
                var picasaData = {'username':username};
                this.dispatchEvent('Adapter:Picasa:getRecentPhotos', picasaData, function(result) {
                    document.getElementById('photos').innerHTML = result;
                });
            };
            this.loadMap = function(address, mapName) {
                var mapData = {'address':address};
                mapData.destCanvas = document.getElementById(mapName || 'map');
                this.dispatchEvent('Adapter:Google:loadMap', mapData);
            };
            this.getUserVideos = function(username) {
                this.dispatchEvent('Adapter:YouTube:getUserVideos', {'username':username}, function(result) {
                    document.getElementById('vids').innerHTML = result;
                });
            };
        });
        
        $(document).ready(function() {
            $('#tweets').click(function() { myView.getTweets(); });
            $('#photos').click(function() { myView.getPhotos('travis.ard') });
            $('#map').click(function() { myView.loadMap('salem, mo', 'map') });
            $('#vids').click(function() { myView.getUserVideos('painkillersnporn') });
        });

    </script>
    
</head>
<body>
    <div id="photos" style="width: 100%;">Load pics</div>
    <div id="map" style="width: 100%; height: 400px;">Load map</div>
    <div id="tweets" style="width: 100%;">Load tweets</div>
    <div id="vids" style="width: 100%;">Load vids</div>
</body>
</html>